{"ast":null,"code":"var _jsxFileName = \"F:\\\\Uni\\\\Term 6\\\\Database\\\\dblab_project\\\\dblab_final\\\\frontend\\\\staffs\\\\src\\\\store\\\\UserContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  user: {},\n  addUser: (fname, lname, email, address, birthDate, phoneNum, gender, pass) => {},\n  removeUser: userId => {},\n  findUser: email => {},\n  logUserIn: (email, pass) => {},\n  logUserOut: () => {}\n});\nconst initialCurrUserValue = () => {\n  const currUser = localStorage.getItem(\"user\");\n  return currUser ? JSON.parse(currUser) : {};\n};\nexport const UserContextProvider = props => {\n  _s();\n  const [loggedInUser, setLoggedInUser] = useState(initialCurrUserValue);\n  useEffect(() => {\n    localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\n  }, [loggedInUser]);\n  const addUserHandler = (user, navigate) => {\n    axios.post('http://127.0.0.1:8080/user/register', {\n      lname: user.lname,\n      fname: user.fname,\n      username: user.username,\n      password: user.pass,\n      birth_date: user.birthDate,\n      address: user.address,\n      phone_number: user.phoneNum,\n      gender: user.gender\n    }).then(response => {\n      console.log(response);\n      navigate();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const removeUserHandler = userId => {\n    axios.delete(`localhost:8080/user/${userId}`).then(response => {\n      console.log(response);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const findUserHandler = email => {\n    console.log(email);\n  };\n  const logUserInHandler = (user, navigate) => {\n    setLoggedInUser(user);\n    axios.post('http://127.0.0.1:8080/user/authenticate', {\n      username: user.username,\n      password: user.password\n    }).then(response => {\n      const token = response.data.token;\n      localStorage.setItem('token', JSON.stringify(token));\n      navigate();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const logUserOutHandler = () => {\n    setLoggedInUser(\"\");\n  };\n  const context = {\n    user: loggedInUser,\n    addUser: addUserHandler,\n    removeUser: removeUserHandler,\n    findUser: findUserHandler,\n    logUserIn: logUserInHandler,\n    logUserOut: logUserOutHandler\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: context,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(UserContextProvider, \"hnboPl5LrzJMkDKPYYWI7e4boXA=\");\n_c = UserContextProvider;\nexport default UserContext;\nvar _c;\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsxDEV","_jsxDEV","UserContext","user","addUser","fname","lname","email","address","birthDate","phoneNum","gender","pass","removeUser","userId","findUser","logUserIn","logUserOut","initialCurrUserValue","currUser","localStorage","getItem","JSON","parse","UserContextProvider","props","_s","loggedInUser","setLoggedInUser","setItem","stringify","addUserHandler","navigate","post","username","password","birth_date","phone_number","then","response","console","log","catch","err","removeUserHandler","delete","findUserHandler","logUserInHandler","token","data","logUserOutHandler","context","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/Uni/Term 6/Database/dblab_project/dblab_final/frontend/staffs/src/store/UserContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\n\r\nconst UserContext = createContext({\r\n  user: {},\r\n  addUser: (\r\n    fname,\r\n    lname,\r\n    email,\r\n    address,\r\n    birthDate,\r\n    phoneNum,\r\n    gender,\r\n    pass\r\n  ) => {},\r\n  removeUser: (userId) => {},\r\n  findUser: (email) => {},\r\n  logUserIn: (email, pass) => {},\r\n  logUserOut: () => {},\r\n});\r\n\r\nconst initialCurrUserValue = () => {\r\n  const currUser = localStorage.getItem(\"user\");\r\n  return currUser ? JSON.parse(currUser) : {};\r\n};\r\n\r\nexport const UserContextProvider = (props) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(initialCurrUserValue);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\r\n  }, [loggedInUser]);\r\n\r\n  const addUserHandler = (user,navigate) => {\r\n\r\n    axios.post('http://127.0.0.1:8080/user/register',{\r\n            lname: user.lname,\r\n            fname: user.fname,\r\n            username: user.username,\r\n            password: user.pass,\r\n            birth_date: user.birthDate,\r\n            address: user.address,\r\n            phone_number: user.phoneNum,\r\n            gender: user.gender\r\n    }).then(response => {console.log(response)\r\n        navigate()\r\n    }).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const removeUserHandler = (userId) => {\r\n    axios.delete(`localhost:8080/user/${userId}`).then(response => {console.log(response)}).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const findUserHandler = (email) => {\r\n    console.log(email);\r\n  };\r\n\r\n  const logUserInHandler = (user,navigate) => {\r\n    setLoggedInUser(user);\r\n  axios.post('http://127.0.0.1:8080/user/authenticate', {\r\n       username: user.username,\r\n       password: user.password\r\n     })\r\n     .then(response => {\r\n       const token = response.data.token;\r\n       localStorage.setItem('token', JSON.stringify(token));\r\n       navigate();\r\n\r\n     })\r\n     .catch(err => {\r\n       console.log(err);\r\n     });\r\n  };\r\n\r\n  const logUserOutHandler = () => {\r\n    setLoggedInUser(\"\");\r\n  };\r\n\r\n  const context = {\r\n    user: loggedInUser,\r\n    addUser: addUserHandler,\r\n    removeUser: removeUserHandler,\r\n    findUser: findUserHandler,\r\n    logUserIn: logUserInHandler,\r\n    logUserOut: logUserOutHandler,\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={context}>\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
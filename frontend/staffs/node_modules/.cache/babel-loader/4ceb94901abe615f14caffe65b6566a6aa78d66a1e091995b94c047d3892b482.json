{"ast":null,"code":"import React,{createContext,useState,useEffect}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const UserContext=/*#__PURE__*/createContext({user:{},addUser:(user,navigate)=>{},removeUser:userId=>{},findUser:email=>{},logUserIn:(user,navigate)=>{},logUserOut:()=>{}});const initialCurrUserValue=()=>{const currUser=localStorage.getItem(\"user\");return currUser?JSON.parse(currUser):{};};export const UserContextProvider=props=>{const[loggedInUser,setLoggedInUser]=useState(initialCurrUserValue);useEffect(()=>{localStorage.setItem(\"user\",JSON.stringify(loggedInUser));},[loggedInUser]);const addUserHandler=(user,navigate)=>{console.log(user);axios.post('http://127.0.0.1:8080/user/register',{lname:user.lname,fname:user.fname,username:user.username,email:user.email,password:user.pass,birth_date:user.birthDate,address:user.address,phone_number:user.phoneNum,gender:user.gender}).then(response=>{console.log(response);navigate();}).catch(err=>{console.log(err);});};const removeUserHandler=(userId,navigate)=>{const token=localStorage.getItem('token');axios.delete(\"http://127.0.0.1:8080/user/\".concat(userId),{headers:{Authorization:JSON.parse(token)}}).then(response=>{console.log(response);navigate();}).catch(err=>{console.log(err);});};const findUserHandler=email=>{console.log(email);};const logUserInHandler=(user,navigate)=>{setLoggedInUser(user);axios.post('http://127.0.0.1:8080/user/authenticate',{username:user.username,password:user.password}).then(response=>{const token=response.data.token;localStorage.setItem('token',JSON.stringify(token));navigate();}).catch(err=>{console.log(err);});};const logUserOutHandler=()=>{setLoggedInUser(\"\");};const context={user:loggedInUser,addUser:addUserHandler,removeUser:removeUserHandler,findUser:findUserHandler,logUserIn:logUserInHandler,logUserOut:logUserOutHandler};return/*#__PURE__*/_jsx(UserContext.Provider,{value:context,children:props.children});};export default UserContext;","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","UserContext","user","addUser","navigate","removeUser","userId","findUser","email","logUserIn","logUserOut","initialCurrUserValue","currUser","localStorage","getItem","JSON","parse","UserContextProvider","props","loggedInUser","setLoggedInUser","setItem","stringify","addUserHandler","console","log","post","lname","fname","username","password","pass","birth_date","birthDate","address","phone_number","phoneNum","gender","then","response","catch","err","removeUserHandler","token","delete","concat","headers","Authorization","findUserHandler","logUserInHandler","data","logUserOutHandler","context","Provider","value","children"],"sources":["F:/Uni/Term 6/Database/dblab_project/dblab_final/frontend/staffs/src/store/UserContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\n\r\nconst UserContext = createContext({\r\n  user: {},\r\n  addUser: (user,navigate) => {},\r\n  removeUser: (userId) => {},\r\n  findUser: (email) => {},\r\n  logUserIn: (user,navigate) => {},\r\n  logUserOut: () => {},\r\n});\r\n\r\nconst initialCurrUserValue = () => {\r\n  const currUser = localStorage.getItem(\"user\");\r\n  return currUser ? JSON.parse(currUser) : {};\r\n};\r\n\r\nexport const UserContextProvider = (props) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(initialCurrUserValue);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\r\n  }, [loggedInUser]);\r\n\r\n  const addUserHandler = (user,navigate) => {\r\nconsole.log(user)\r\n    axios.post('http://127.0.0.1:8080/user/register',{\r\n            lname: user.lname,\r\n            fname: user.fname,\r\n            username: user.username,\r\n            email: user.email,\r\n            password: user.pass,\r\n            birth_date: user.birthDate,\r\n            address: user.address,\r\n            phone_number: user.phoneNum,\r\n            gender: user.gender\r\n    }).then(response => {console.log(response)\r\n        navigate()\r\n    }).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const removeUserHandler = (userId,navigate) => {\r\n  const token = localStorage.getItem('token')\r\n    axios.delete(`http://127.0.0.1:8080/user/${userId}`, {\r\n    headers: {\r\n        Authorization: JSON.parse(token)\r\n    }\r\n    })\r\n    .then(response => {console.log(response)\r\n\r\n        navigate()\r\n    }).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const findUserHandler = (email) => {\r\n    console.log(email);\r\n  };\r\n\r\n  const logUserInHandler = (user,navigate) => {\r\n    setLoggedInUser(user);\r\n  axios.post('http://127.0.0.1:8080/user/authenticate', {\r\n       username: user.username,\r\n       password: user.password\r\n     })\r\n     .then(response => {\r\n       const token = response.data.token;\r\n       localStorage.setItem('token', JSON.stringify(token));\r\n       navigate();\r\n\r\n     })\r\n     .catch(err => {\r\n       console.log(err);\r\n     });\r\n  };\r\n\r\n  const logUserOutHandler = () => {\r\n    setLoggedInUser(\"\");\r\n  };\r\n\r\n  const context = {\r\n    user: loggedInUser,\r\n    addUser: addUserHandler,\r\n    removeUser: removeUserHandler,\r\n    findUser: findUserHandler,\r\n    logUserIn: logUserInHandler,\r\n    logUserOut: logUserOutHandler,\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={context}>\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"F:\\\\Uni\\\\Term 6\\\\Database\\\\dblab_project\\\\dblab_final\\\\frontend\\\\staffs\\\\src\\\\store\\\\UserContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  user: {},\n  addUser: (user, navigate) => {},\n  removeUser: userId => {},\n  findUser: email => {},\n  logUserIn: (user, navigate) => {},\n  logUserOut: () => {}\n});\nconst initialCurrUserValue = () => {\n  const currUser = localStorage.getItem(\"user\");\n  return currUser ? JSON.parse(currUser) : {};\n};\nexport const UserContextProvider = props => {\n  _s();\n  const [loggedInUser, setLoggedInUser] = useState(initialCurrUserValue);\n  useEffect(() => {\n    localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\n  }, [loggedInUser]);\n  const addUserHandler = (user, navigate) => {\n    console.log(user);\n    axios.post('http://127.0.0.1:8080/user/register', {\n      lname: user.lname,\n      fname: user.fname,\n      username: user.username,\n      password: user.pass,\n      birth_date: user.birthDate,\n      address: user.address,\n      phone_number: user.phoneNum,\n      gender: user.gender\n    }).then(response => {\n      console.log(response);\n      navigate();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const removeUserHandler = (userId, navigate) => {\n    const token = localStorage.getItem('token');\n    axios.delete(`http://127.0.0.1:8080/user/${userId}`, {\n      headers: {\n        Authorization: JSON.parse(token)\n      }\n    }).then(response => {\n      console.log(response);\n      navigate();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const findUserHandler = email => {\n    console.log(email);\n  };\n  const logUserInHandler = (user, navigate) => {\n    setLoggedInUser(user);\n    axios.post('http://127.0.0.1:8080/user/authenticate', {\n      username: user.username,\n      password: user.password\n    }).then(response => {\n      const token = response.data.token;\n      localStorage.setItem('token', JSON.stringify(token));\n      navigate();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const logUserOutHandler = () => {\n    setLoggedInUser(\"\");\n  };\n  const context = {\n    user: loggedInUser,\n    addUser: addUserHandler,\n    removeUser: removeUserHandler,\n    findUser: findUserHandler,\n    logUserIn: logUserInHandler,\n    logUserOut: logUserOutHandler\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: context,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(UserContextProvider, \"hnboPl5LrzJMkDKPYYWI7e4boXA=\");\n_c = UserContextProvider;\nexport default UserContext;\nvar _c;\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsxDEV","_jsxDEV","UserContext","user","addUser","navigate","removeUser","userId","findUser","email","logUserIn","logUserOut","initialCurrUserValue","currUser","localStorage","getItem","JSON","parse","UserContextProvider","props","_s","loggedInUser","setLoggedInUser","setItem","stringify","addUserHandler","console","log","post","lname","fname","username","password","pass","birth_date","birthDate","address","phone_number","phoneNum","gender","then","response","catch","err","removeUserHandler","token","delete","headers","Authorization","findUserHandler","logUserInHandler","data","logUserOutHandler","context","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/Uni/Term 6/Database/dblab_project/dblab_final/frontend/staffs/src/store/UserContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\n\r\nconst UserContext = createContext({\r\n  user: {},\r\n  addUser: (user,navigate) => {},\r\n  removeUser: (userId) => {},\r\n  findUser: (email) => {},\r\n  logUserIn: (user,navigate) => {},\r\n  logUserOut: () => {},\r\n});\r\n\r\nconst initialCurrUserValue = () => {\r\n  const currUser = localStorage.getItem(\"user\");\r\n  return currUser ? JSON.parse(currUser) : {};\r\n};\r\n\r\nexport const UserContextProvider = (props) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(initialCurrUserValue);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\r\n  }, [loggedInUser]);\r\n\r\n  const addUserHandler = (user,navigate) => {\r\nconsole.log(user)\r\n    axios.post('http://127.0.0.1:8080/user/register',{\r\n            lname: user.lname,\r\n            fname: user.fname,\r\n            username: user.username,\r\n            password: user.pass,\r\n            birth_date: user.birthDate,\r\n            address: user.address,\r\n            phone_number: user.phoneNum,\r\n            gender: user.gender\r\n    }).then(response => {console.log(response)\r\n        navigate()\r\n    }).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const removeUserHandler = (userId,navigate) => {\r\n  const token = localStorage.getItem('token')\r\n    axios.delete(`http://127.0.0.1:8080/user/${userId}`, {\r\n    headers: {\r\n        Authorization: JSON.parse(token)\r\n    }\r\n    })\r\n    .then(response => {console.log(response)\r\n\r\n        navigate()\r\n    }).catch(err => {console.log(err)})\r\n  };\r\n\r\n  const findUserHandler = (email) => {\r\n    console.log(email);\r\n  };\r\n\r\n  const logUserInHandler = (user,navigate) => {\r\n    setLoggedInUser(user);\r\n  axios.post('http://127.0.0.1:8080/user/authenticate', {\r\n       username: user.username,\r\n       password: user.password\r\n     })\r\n     .then(response => {\r\n       const token = response.data.token;\r\n       localStorage.setItem('token', JSON.stringify(token));\r\n       navigate();\r\n\r\n     })\r\n     .catch(err => {\r\n       console.log(err);\r\n     });\r\n  };\r\n\r\n  const logUserOutHandler = () => {\r\n    setLoggedInUser(\"\");\r\n  };\r\n\r\n  const context = {\r\n    user: loggedInUser,\r\n    addUser: addUserHandler,\r\n    removeUser: removeUserHandler,\r\n    findUser: findUserHandler,\r\n    logUserIn: logUserInHandler,\r\n    logUserOut: logUserOutHandler,\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={context}>\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserContext;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,WAAW,gBAAGN,aAAa,CAAC;EAChCO,IAAI,EAAE,CAAC,CAAC;EACRC,OAAO,EAAEA,CAACD,IAAI,EAACE,QAAQ,KAAK,CAAC,CAAC;EAC9BC,UAAU,EAAGC,MAAM,IAAK,CAAC,CAAC;EAC1BC,QAAQ,EAAGC,KAAK,IAAK,CAAC,CAAC;EACvBC,SAAS,EAAEA,CAACP,IAAI,EAACE,QAAQ,KAAK,CAAC,CAAC;EAChCM,UAAU,EAAEA,CAAA,KAAM,CAAC;AACrB,CAAC,CAAC;AAEF,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACjC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAC7C,OAAOF,QAAQ,GAAGG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC7C,CAAC;AAED,OAAO,MAAMK,mBAAmB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAACe,oBAAoB,CAAC;EAEtEd,SAAS,CAAC,MAAM;IACdgB,YAAY,CAACS,OAAO,CAAC,MAAM,EAAEP,IAAI,CAACQ,SAAS,CAACH,YAAY,CAAC,CAAC;EAC5D,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,MAAMI,cAAc,GAAGA,CAACtB,IAAI,EAACE,QAAQ,KAAK;IAC5CqB,OAAO,CAACC,GAAG,CAACxB,IAAI,CAAC;IACbJ,KAAK,CAAC6B,IAAI,CAAC,qCAAqC,EAAC;MACzCC,KAAK,EAAE1B,IAAI,CAAC0B,KAAK;MACjBC,KAAK,EAAE3B,IAAI,CAAC2B,KAAK;MACjBC,QAAQ,EAAE5B,IAAI,CAAC4B,QAAQ;MACvBC,QAAQ,EAAE7B,IAAI,CAAC8B,IAAI;MACnBC,UAAU,EAAE/B,IAAI,CAACgC,SAAS;MAC1BC,OAAO,EAAEjC,IAAI,CAACiC,OAAO;MACrBC,YAAY,EAAElC,IAAI,CAACmC,QAAQ;MAC3BC,MAAM,EAAEpC,IAAI,CAACoC;IACrB,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;MAACf,OAAO,CAACC,GAAG,CAACc,QAAQ,CAAC;MACtCpC,QAAQ,CAAC,CAAC;IACd,CAAC,CAAC,CAACqC,KAAK,CAACC,GAAG,IAAI;MAACjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;IAAA,CAAC,CAAC;EACrC,CAAC;EAED,MAAMC,iBAAiB,GAAGA,CAACrC,MAAM,EAACF,QAAQ,KAAK;IAC/C,MAAMwC,KAAK,GAAG/B,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzChB,KAAK,CAAC+C,MAAM,CAAC,8BAA8BvC,MAAM,EAAE,EAAE;MACrDwC,OAAO,EAAE;QACLC,aAAa,EAAEhC,IAAI,CAACC,KAAK,CAAC4B,KAAK;MACnC;IACA,CAAC,CAAC,CACDL,IAAI,CAACC,QAAQ,IAAI;MAACf,OAAO,CAACC,GAAG,CAACc,QAAQ,CAAC;MAEpCpC,QAAQ,CAAC,CAAC;IACd,CAAC,CAAC,CAACqC,KAAK,CAACC,GAAG,IAAI;MAACjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;IAAA,CAAC,CAAC;EACrC,CAAC;EAED,MAAMM,eAAe,GAAIxC,KAAK,IAAK;IACjCiB,OAAO,CAACC,GAAG,CAAClB,KAAK,CAAC;EACpB,CAAC;EAED,MAAMyC,gBAAgB,GAAGA,CAAC/C,IAAI,EAACE,QAAQ,KAAK;IAC1CiB,eAAe,CAACnB,IAAI,CAAC;IACvBJ,KAAK,CAAC6B,IAAI,CAAC,yCAAyC,EAAE;MACjDG,QAAQ,EAAE5B,IAAI,CAAC4B,QAAQ;MACvBC,QAAQ,EAAE7B,IAAI,CAAC6B;IACjB,CAAC,CAAC,CACDQ,IAAI,CAACC,QAAQ,IAAI;MAChB,MAAMI,KAAK,GAAGJ,QAAQ,CAACU,IAAI,CAACN,KAAK;MACjC/B,YAAY,CAACS,OAAO,CAAC,OAAO,EAAEP,IAAI,CAACQ,SAAS,CAACqB,KAAK,CAAC,CAAC;MACpDxC,QAAQ,CAAC,CAAC;IAEZ,CAAC,CAAC,CACDqC,KAAK,CAACC,GAAG,IAAI;MACZjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;IAClB,CAAC,CAAC;EACL,CAAC;EAED,MAAMS,iBAAiB,GAAGA,CAAA,KAAM;IAC9B9B,eAAe,CAAC,EAAE,CAAC;EACrB,CAAC;EAED,MAAM+B,OAAO,GAAG;IACdlD,IAAI,EAAEkB,YAAY;IAClBjB,OAAO,EAAEqB,cAAc;IACvBnB,UAAU,EAAEsC,iBAAiB;IAC7BpC,QAAQ,EAAEyC,eAAe;IACzBvC,SAAS,EAAEwC,gBAAgB;IAC3BvC,UAAU,EAAEyC;EACd,CAAC;EAED,oBACEnD,OAAA,CAACC,WAAW,CAACoD,QAAQ;IAACC,KAAK,EAAEF,OAAQ;IAAAG,QAAA,EAClCrC,KAAK,CAACqC;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACK,CAAC;AAE3B,CAAC;AAACxC,EAAA,CA3EWF,mBAAmB;AAAA2C,EAAA,GAAnB3C,mBAAmB;AA6EhC,eAAehB,WAAW;AAAC,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}